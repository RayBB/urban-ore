<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Art Renderer</title>
    <style>
        body { background-color: #333; color: #eee; font-family: sans-serif; text-align: center; margin-top: 50px; }
        canvas {
            border: 2px solid #555;
            image-rendering: pixelated; /* Preserves sharp pixels when scaling */
            image-rendering: crisp-edges;
        }
    </style>
</head>
<body>

    <h1>Sprite Renderer</h1>
    <div style="max-width:900px;margin:0 auto 20px;padding:0 16px;">
        <label for="jsonInput" style="display:block;margin:0 0 8px;text-align:left;">Paste sprite JSON</label>
        <textarea id="jsonInput" placeholder='{"width":16,"height":16,"palette":{"0":"#000000"},"pixels":[[0,...],...]}' style="width:100%;min-height:160px;border:1px solid #555;background:#222;color:#eee;border-radius:4px;padding:8px;font-family:monospace;"></textarea>
        <div id="status" style="text-align:left;color:#f88;margin-top:6px;min-height:1.2em;"></div>
    </div>
    <!-- Canvas is scaled via CSS for crisp pixels -->
    <canvas id="spriteCanvas" width="64" height="64" style="width: 512px; height: 512px;"></canvas>

    <script>
        (function() {
            const canvas = document.getElementById('spriteCanvas');
            const ctx = canvas.getContext && canvas.getContext('2d');
            const input = document.getElementById('jsonInput');
            const statusEl = document.getElementById('status');

            function renderSprite(spriteData) {
                if (!ctx) return;
                const { width, height, palette, pixels } = spriteData || {};
                if (!width || !height || !palette || !pixels) {
                    throw new Error('JSON must include width, height, palette, and pixels');
                }
                // Resize backing store to sprite size
                canvas.width = width;
                canvas.height = height;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (let y = 0; y < height; y++) {
                    for (let x = 0; x < width; x++) {
                        const pi = pixels[y][x];
                        const color = palette[pi];
                        if (!color) continue;
                        ctx.fillStyle = color;
                        ctx.fillRect(x, y, 1, 1);
                    }
                }
                statusEl.style.color = '#8f8';
                statusEl.textContent = 'Rendered';
            }

            function tryParseAndRender(text) {
                if (!text.trim()) { statusEl.textContent = ''; return; }
                try {
                    const data = JSON.parse(text);
                    renderSprite(data);
                } catch (e) {
                    statusEl.style.color = '#f88';
                    statusEl.textContent = 'Invalid JSON';
                }
            }

            // Preload with existing example
            const example = {
  "width": 32,
  "height": 32,
  "palette": {
    "0": "#7ABBE5",
    "1": "#212121",
    "2": "#4E9C4F",
    "3": "#7BCB7B",
    "4": "#FFFFFF",
    "5": "#E54747",
    "6": "#B92F2F",
    "7": "#F2D267",
    "8": "#D4B04B",
    "9": "#F6D3A9",
    "10": "#DCA46E",
    "11": "#A4A4A4",
    "12": "#777777",
    "13": "#555555",
    "14": "#8B4513",
    "15": "#888888"
  },
  "pixels": [
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,6,5,5,1,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,5,5,5,4,1,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,1,14,14,5,5,1,1,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,1,9,14,1,9,1,7,1,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,1,9,9,10,1,7,7,7,1,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,1,10,9,1,1,8,7,7,7,1,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,1,7,7,8,1,1,9,9,1,1,11,1,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,1,8,7,8,1,11,1,10,9,10,1,11,12,1,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,1,1,1,1,1,11,12,1,1,1,1,12,11,11,1,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,1,12,11,12,11,1,9,9,1,0,0,1,11,11,12,1,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,1,11,11,1,1,1,1,10,9,10,1,1,1,12,1,1,1,1,0,0,0,0,0,0,0,0,0],
    [0,0,0,1,11,12,1,0,0,0,1,1,1,1,11,12,11,1,1,1,1,1,1,0,0,0,0,0,0,0,0],
    [0,0,0,1,12,1,0,0,0,1,1,1,11,12,11,11,1,1,0,1,1,9,1,0,0,0,0,0,0,0,0],
    [0,0,1,1,1,0,0,0,1,11,12,11,11,1,1,1,10,1,1,10,9,10,1,0,0,0,0,0,0,0,0],
    [0,0,1,4,1,0,0,1,12,11,1,1,1,1,9,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],
    [0,0,1,1,1,0,1,11,12,1,1,9,10,1,11,1,0,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,1,1,1,1,1,11,12,1,1,12,1,1,1,0,1,4,4,1,1,1,1,0,0,0,0,0,0],
    [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,12,11,1,1,2,2,2,2,3,1,0,0,0,0,0,0],
    [0,0,0,1,1,1,1,1,1,0,0,0,1,1,11,12,1,1,1,2,2,3,2,2,2,1,0,0,0,0,0,0],
    [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,3,2,2,2,1,13,1,0,0,0,0,0],
    [0,0,0,0,1,4,4,1,1,13,15,13,1,2,2,2,2,3,2,2,2,2,2,1,13,15,13,1,0,0,0,0],
    [0,0,0,0,1,2,2,1,13,15,13,13,1,2,3,3,2,2,2,2,2,1,13,15,13,13,13,1,0,0,0],
    [0,0,0,0,1,2,3,1,13,13,13,1,1,2,2,3,2,2,2,1,13,15,13,13,13,1,4,1,0,0,0],
    [0,0,0,0,1,2,2,1,13,13,1,4,1,2,2,2,2,2,1,13,13,13,13,1,1,1,1,1,0,0,0],
    [0,0,0,0,1,13,13,1,1,1,1,1,1,1,1,1,1,1,13,13,13,13,1,4,1,15,13,1,0,0,0],
    [0,0,0,0,1,13,15,13,13,13,13,13,13,13,13,13,13,13,13,13,1,1,1,1,13,13,1,0,0,0],
    [0,0,0,0,1,13,13,13,13,13,13,13,13,13,13,13,13,13,13,1,13,15,13,13,13,1,0,0,0,0],
    [0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
  ]
};

            input.value = JSON.stringify(example);
            try { renderSprite(example); } catch (e) {}

            // Auto-render on paste/type
            input.addEventListener('input', () => {
                tryParseAndRender(input.value);
            });
        })();
    </script>

</body>
</html>